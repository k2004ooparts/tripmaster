// TripMaster ì¼ì • ê¸°ëŠ¥ + UX ì• ë‹ˆë©”ì´ì…˜ í¬í•¨ ë²„ì „ (ì¶”ê°€ë¶„ë§Œ)

<script>
let travelPlans = JSON.parse(localStorage.getItem('travelPlans')) || [];

function createPlan() {
  const date = prompt('ì—¬í–‰ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 2025-05-01)');
  const title = prompt('ì¼ì • ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì œì£¼ íë§ ì—¬í–‰)');
  if (date && title) {
    travelPlans.push({ date, title, places: [] });
    localStorage.setItem('travelPlans', JSON.stringify(travelPlans));
    alert('ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
    displayPlans();
  }
}

function addToPlan(placeName) {
  if (travelPlans.length === 0) return alert('ë¨¼ì € ì¼ì •ì„ í•˜ë‚˜ ë§Œë“¤ì–´ì£¼ì„¸ìš”!');
  const planTitles = travelPlans.map((p, i) => `${i + 1}. ${p.title} (${p.date})`).join('\n');
  const choice = prompt(`ì–´ëŠ ì¼ì •ì— ì¶”ê°€í• ê¹Œìš”?\n${planTitles}`);
  const index = parseInt(choice) - 1;
  if (travelPlans[index]) {
    travelPlans[index].places.push(placeName);
    localStorage.setItem('travelPlans', JSON.stringify(travelPlans));
    displayPlans();
  }
}

function displayPlans() {
  const container = document.getElementById('plans');
  container.innerHTML = '<h3>ğŸ“… ë‚˜ì˜ ì—¬í–‰ ì¼ì •</h3>';
  travelPlans.forEach(p => {
    container.innerHTML += `<div class="plan-card" style="margin:1rem 0;padding:1rem;background:#fff;border-radius:15px;box-shadow:0 2px 10px rgba(0,0,0,0.1);animation:fadeIn 0.5s ease;">
      <strong>${p.date} - ${p.title}</strong><br/>
      ${p.places.length > 0 ? p.places.join(', ') : 'ì¶”ê°€ëœ ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.'}
    </div>`;
  });
}

// ê²°ê³¼ ì¶”ì²œì‹œ ëŒ€ê¸° ì• ë‹ˆë©”ì´ì…˜ + ì¼ì • ì¶”ê°€ ë²„íŠ¼ ë°˜ì˜
function recommend() {
  const style = document.getElementById('style').value;
  const budget = document.getElementById('budget').value;
  if (style && budget) {
    document.getElementById('result').innerHTML = '<p>ì¶”ì²œ ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš” ğŸ§­</p>';
    setTimeout(() => {
      const place = places[style][Math.floor(Math.random() * places[style].length)];
      document.getElementById('result').innerHTML = `
        <div style="animation:fadeInUp 0.6s ease;">
          <h2>${place.name}</h2>
          <img src="${place.image}" class="place-image" alt="${place.name}"/>
          <br/>
          <a href="${place.map}" target="_blank"><button>ì§€ë„ ë³´ê¸°</button></a>
          <button onclick="addToPlan('${place.name}')">ì¼ì •ì— ì¶”ê°€</button>
        </div>
      `;
      showMission();
    }, 1200);
  } else {
    document.getElementById('result').textContent = 'ì—¬í–‰ ìŠ¤íƒ€ì¼ê³¼ ì˜ˆì‚°ì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”!';
  }
}

// ì• ë‹ˆë©”ì´ì…˜
const style = document.createElement('style');
style.innerHTML = `
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}`;
document.head.appendChild(style);

displayPlans();
</script>
<div id="plans"></div>
<button onclick="createPlan()">+ ìƒˆ ì¼ì • ë§Œë“¤ê¸°</button>
