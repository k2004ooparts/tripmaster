<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ§­ TripMaster - ë‚˜ë§Œì˜ AI ì—¬í–‰ ë„ìš°ë¯¸</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0; padding: 2rem;
      background-color: #f8f9fa;
      color: #333;
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
    }
    h1 { font-size: 2.5rem; margin-bottom: 1rem; }
    p { font-size: 1.1rem; color: #555; margin-bottom: 2rem; }
    select, input {
      padding: 0.9rem; margin: 0.6rem 0; width: 280px; font-size: 1rem;
      border-radius: 15px; border: 1px solid #ccc; background: #fff;
    }
    button {
      background-color: #007aff; color: white;
      padding: 0.8rem 1.5rem; border: none; border-radius: 30px;
      font-size: 1.1rem; margin: 0.5rem; cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: 0.3s ease;
    }
    button:hover { background-color: #005bb5; transform: scale(1.05); }
    img.logo { width: 160px; margin-bottom: 1.5rem; }
    img.place-image {
      width: 100%; height: 200px; object-fit: cover;
      border-radius: 15px; margin-top: 1rem;
    }
    #result, #mission, #badges, #savedTrips, #plans {
      margin-top: 2rem; font-size: 1.1rem; text-align: center;
      max-width: 500px; width: 100%;
    }
    .badge-animate { animation: pop 0.5s ease forwards; }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); }
    }
    .plan-card {
      margin: 1rem 0; padding: 1rem;
      background: #fff; border-radius: 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      animation: fadeInUp 0.5s ease;
    }
  </style>
</head>
<body>
  <div id="userBox" style="margin-bottom:1rem;text-align:right;width:100%;max-width:600px;"></div>
  <img src="TripMaster_Threads_Logo_1.png" alt="TripMaster ë¡œê³ " class="logo" />
  <h1>ğŸ§­ TripMaster</h1>
  <p>ì—¬í–‰ ìŠ¤íƒ€ì¼ê³¼ ì„±í–¥ì„ ì„ íƒí•˜ê³  ë‹¹ì‹ ë§Œì˜ AI ì—¬í–‰ì§€ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!</p>

  <select id="style">
    <option value="">ğŸŒ ì—¬í–‰ ìŠ¤íƒ€ì¼ ì„ íƒ</option>
    <option value="healing">ğŸ§˜ íë§</option>
    <option value="activity">ğŸ¢ ì•¡í‹°ë¹„í‹°</option>
    <option value="culture">ğŸ›ï¸ ë¬¸í™” ì²´í—˜</option>
  </select><br/>
  <input type="number" id="budget" placeholder="ğŸ’° ì˜ˆì‚° (ë§Œì›) ì…ë ¥" /><br/>
  <button onclick="askPreferences()">ğŸ§  ì—¬í–‰ ì„±í–¥ ì„¤ì •</button>
  <button onclick="smartRecommend()">ğŸ¯ AI ë§ì¶¤ ì¶”ì²œë°›ê¸°</button>

  <div id="result"></div>
  <div id="mission"></div>
  <div id="badges"></div>
  <div id="plans"></div>
  <div id="savedTrips"></div>
  <button onclick="createPlan()">ğŸ“… ìƒˆ ì¼ì • ë§Œë“¤ê¸°</button>

  <script>
    let currentUser = localStorage.getItem('tripUser') || null;
    function loginUser() {
      const name = prompt('ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');
      if (name) {
        localStorage.setItem('tripUser', name);
        currentUser = name;
        alert(`í™˜ì˜í•©ë‹ˆë‹¤, ${name}ë‹˜!`);
        updateUserUI();
      }
    }
    function logoutUser() {
      localStorage.removeItem('tripUser');
      currentUser = null;
      alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
      updateUserUI();
    }
    function updateUserUI() {
      const box = document.getElementById('userBox');
      box.innerHTML = currentUser ? `ğŸ‘¤ ${currentUser} ë‹˜ <button onclick=\"logoutUser()\">ë¡œê·¸ì•„ì›ƒ</button>` : `<button onclick=\"loginUser()\">ğŸ‘¤ ë¡œê·¸ì¸</button>`;
    }
    updateUserUI();

    const personalityQuestions = [
      { id: 'companion', question: 'í˜¼ì ì—¬í–‰ vs í•¨ê»˜ ì—¬í–‰?', options: ['í˜¼ì', 'í•¨ê»˜'] },
      { id: 'stylePref', question: 'í˜¸ìº‰ìŠ¤ vs íƒí—˜íŒŒ?', options: ['í˜¸ìº‰ìŠ¤', 'íƒí—˜'] },
      { id: 'energy', question: 'ì‰¬ê¸° vs ì›€ì§ì´ê¸°?', options: ['ì‰¬ê¸°', 'ì›€ì§ì´ê¸°'] }
    ];
    let userPreferences = JSON.parse(localStorage.getItem('tripPrefs')) || {};
    function askPreferences() {
      let answers = {};
      for (const q of personalityQuestions) {
        const a = prompt(`${q.question}\n(${q.options.join(' / ')})`);
        if (a) answers[q.id] = a;
      }
      userPreferences = answers;
      localStorage.setItem('tripPrefs', JSON.stringify(userPreferences));
    }

    function smartRecommend() {
      const style = document.getElementById('style').value;
      const budget = document.getElementById('budget').value;
      if (!style || !budget || !userPreferences.energy) {
        alert('ì—¬í–‰ ìŠ¤íƒ€ì¼, ì˜ˆì‚°, ì„±í–¥ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return;
      }
      document.getElementById('result').innerHTML = 'ğŸ§­ AIê°€ ì—¬í–‰ì§€ë¥¼ ì¶”ì²œ ì¤‘ì…ë‹ˆë‹¤...';
      setTimeout(() => {
        const sample = { name: 'ì œì£¼ ìš°ë„', image: 'https://images.unsplash.com/photo-1605006535072-182c094aeb5c', map: 'https://maps.app.goo.gl/bAXeqtRW4cUMhbbo7' };
        document.getElementById('result').innerHTML = `<div style='animation:fadeInUp 0.6s ease;'><h2>${sample.name}</h2><img src='${sample.image}' class='place-image'/><br/><a href='${sample.map}' target='_blank'><button>ğŸ“ ì§€ë„ ë³´ê¸°</button></a><button onclick=\"addToPlan('${sample.name}')\">â• ì¼ì •ì— ì¶”ê°€</button></div>`;
        showMission();
      }, 1200);
    }

    function showMission() {
      document.getElementById('mission').innerHTML = `ì˜¤ëŠ˜ì˜ ë¯¸ì…˜: ğŸœ í˜„ì§€ ìŒì‹ ë¨¹ê¸°!<br/><button onclick='completeMission()'>âœ… ë¯¸ì…˜ ì™„ë£Œ</button>`;
    }
    let myBadges = [];
    function completeMission() {
      myBadges.push('ğŸœ ë¯¸ì‹ê°€ ë°°ì§€');
      document.getElementById('badges').innerHTML = `ğŸ… ë‚´ ë°°ì§€: ${myBadges.join(', ')}`;
    }

    let travelPlans = JSON.parse(localStorage.getItem('travelPlans')) || [];
    function createPlan() {
      const date = prompt('ì—¬í–‰ ë‚ ì§œ ì…ë ¥ (ì˜ˆ: 2025-06-01)');
      const title = prompt('ì¼ì • ì œëª© ì…ë ¥');
      if (date && title) {
        travelPlans.push({ date, title, places: [] });
        localStorage.setItem('travelPlans', JSON.stringify(travelPlans));
        displayPlans();
      }
    }
    function addToPlan(placeName) {
      if (travelPlans.length === 0) return alert('ë¨¼ì € ì¼ì •ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.');
      const planList = travelPlans.map((p, i) => `${i + 1}. ${p.title} (${p.date})`).join('\n');
      const i = parseInt(prompt(`ì¶”ê°€í•  ì¼ì • ì„ íƒ:\n${planList}`)) - 1;
      if (travelPlans[i]) {
        travelPlans[i].places.push(placeName);
        localStorage.setItem('travelPlans', JSON.stringify(travelPlans));
        displayPlans();
      }
    }
    function displayPlans() {
      const container = document.getElementById('plans');
      container.innerHTML = '<h3>ğŸ“… ë‚˜ì˜ ì—¬í–‰ ì¼ì •</h3>';
      travelPlans.forEach(p => {
        container.innerHTML += `<div class='plan-card'><strong>${p.date} - ${p.title}</strong><br/>${p.places.join(', ')}</div>`;
      });
    }
    displayPlans();
  </script>
</body>
</html>
